[
  {
    "name": "Convert Video",
    "description": "Will convert videos to the specified format.   The original file will be replaced.\n\nIf the original file is already format the file will not be re-encoded.",
    "group": "Video",
    "save": true,
    "parts": [
      {
        "node": "VideoFile",
        "uid": "00000000-0000-0000-0000-000000000001",
        "xPos": 370,
        "yPos": 10,
        "connections": [
          {
            "input": 1,
            "output": 1,
            "node": "00000000-0000-0000-0000-000000000002"
          }
        ]
      },

      {
        "node": "Function",
        "name": "Check Black Bars?",
        "uid": "00000000-0000-0000-0000-000000000002",
        "xPos": 370,
        "yPos": 130,
        "outputs": 2,
        "connections": [
          {
            "input": 1,
            "output": 1,
            "node": "00000000-0000-0000-0000-000000000003"
          },
          {
            "input": 1,
            "output": 2,
            "node": "00000000-0000-0000-0000-000000000004"
          }
        ],
        "model": {
          "Outputs": 2
        }
      },


      {
        "node": "DetectBlackBars",
        "uid": "00000000-0000-0000-0000-000000000003",
        "xPos": 170,
        "yPos": 260,
        "connections": [
          {
            "output": 1,
            "input": 1,
            "node": "00000000-0000-0000-0000-000000000004"
          },
          {
            "output": 2,
            "input": 1,
            "node": "00000000-0000-0000-0000-000000000004"
          }
        ],
        "model": {
          "CroppingThreshold": 10
        }
      },

      {
        "node": "VideoEncode",
        "uid": "00000000-0000-0000-0000-000000000004",
        "xPos": 570,
        "yPos": 400,
        "connections": [
          {
            "output": 1,
            "input": 1,
            "node": "00000000-0000-0000-0000-000000000005"
          }
        ]
      },

      {
        "node": "ReplaceOriginal",
        "uid": "00000000-0000-0000-0000-000000000005",
        "xPos": 330,
        "yPos": 550
      }
    ],


    "fields": [
      {
        "uid": "00000000-0000-0000-0000-000000000004",
        "type": "Select",
        "label": "Video Codec",
        "help": "The video codec to use for encoding",
        "parameters": {
          "options": [
            {
              "label": "Copy Video",
              "value": {
                "VideoCodec": "",
                "VideoCodecParameters": "",
                "Extension": ""
              }
            },
            {
              "label": "Automatic",
              "value": "###GROUP###"
            },
            {
              "label": "H264",
              "value": {
                "VideoCodec": "h264",
                "VideoCodecParameters": "h264",
                "Extension": "mkv"
              }
            },
            {
              "label": "H265",
              "value": {
                "VideoCodec": "h265",
                "VideoCodecParameters": "h265",
                "Extension": "mkv"
              }
            },
            {
              "label": "CPU Encoding",
              "value": "###GROUP###"
            },
            {
              "label": "H264 (CPU)",
              "value": {
                "VideoCodec": "h264",
                "VideoCodecParameters": "libx264",
                "Extension": "mkv"
              }
            },
            {
              "label": "H265 (CPU)",
              "value": {
                "VideoCodec": "h265",
                "VideoCodecParameters": "libx265",
                "Extension": "mkv"
              }
            },
            {
              "label": "MPEG4",
              "value": {
                "VideoCodec": "mpeg4",
                "VideoCodecParameters": "libxvid",
                "Extension": "mp4"
              }
            },
            {
              "label": "NVIDIA Hardware Encoding",
              "value": "###GROUP###"
            },
            {
              "label": "H264 (NVIDIA)",
              "value": {
                "VideoCodec": "h264",
                "VideoCodecParameters": "h264_nvenc",
                "Extension": "mkv"
              }
            },
            {
              "label": "H265 (NVIDIA)",
              "value": {
                "VideoCodec": "h265",
                "VideoCodecParameters": "hevc_nvenc -preset hq",
                "Extension": "mkv"
              }
            },
            {
              "label": "Intel Hardware Encoding",
              "value": "###GROUP###"
            },
            {
              "label": "H264 (Intel)",
              "value": {
                "VideoCodec": "h265",
                "VideoCodecParameters": "h264_qsv",
                "Extension": "mkv"
              }
            },
            {
              "label": "H265 (Intel)",
              "value": {
                "VideoCodec": "h265",
                "VideoCodecParameters": "hevc_qsv -load_plugin hevc_hw",
                "Extension": "mkv"
              }
            }
          ]
        }
      },
      {
        "uid": "00000000-0000-0000-0000-000000000004",
        "type": "Select",
        "name": "AudioCodec",
        "label": "Audio Codec",
        "help": "The audio codec to use for encoding",
        "parameters": {
          "options": [
            {
              "label": "Copy Audio",
              "value": "COPY"
            },
            {
              "label": "AC3",
              "value": "ac3"
            },
            {
              "label": "AAC",
              "value": "aac"
            },
            {
              "label": "E-AC3",
              "value": "eac3"
            },
            {
              "label": "MP3",
              "value": "mp3"
            }
          ]
        }
      },

      {
        "uid": "00000000-0000-0000-0000-000000000002",
        "type": "Switch",
        "name": "Code",
        "default": false,
        "label": "Crop Black Bars",
        "help": "Automatically crop black bars if detected",
        "value": {
          "true": "/* return 1 here to detect black bars */\nreturn 1;",
          "false": "/* return 2 here to skip detecting black bars */\nreturn 2;"
        }
      }
    ]
  }


] 